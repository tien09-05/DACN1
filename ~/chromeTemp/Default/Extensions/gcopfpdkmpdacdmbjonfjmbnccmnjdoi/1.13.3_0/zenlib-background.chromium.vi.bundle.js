window.YandexZen=window.YandexZen||{},window.YandexZen.createBackground=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t,r){"use strict";var n=r(16),o={};o[r(9)("toStringTag")]="z",o+""!="[object z]"&&r(11)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){const r={LIGHT:"white",DARK:"black"},n={no_amp_links:!0,forced_bulk_stats:!0,blurred_preview:!0,big_card_images:!0,complaints_with_reasons:!0,pass_experiments:!0,video_providers:["yandex-web","youtube","youtube-web"],screen:{dpi:241},need_background_image:!0,color_theme:r.LIGHT,no_small_auth:!0,need_main_color:!0,need_zen_one_data:!0,interests_supported:!0,return_sources:!0,screens:["feed","category","categories","profile","switchable_subs","suggest","blocked","preferences","subscribers","blocked_suggest","video_recommend","language","send_app_link_sms","comments_counter","comments_infos","social_profile","social_activity_feed","social_profile_edit","social_interests_feedback","profile_onboarding_shown","profile_complete_onboarding","profile_deactivate","profile_cancel_deactivate"],stat_params_with_context:!0,carousel_support:!0};e.exports={REZEN_COLOR_THEMES:r,DEFAULT_REZEN_ZEN_FEATURES:n}},function(e,t){var r=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;var n,o=Array.isArray(t),s=Array.isArray(r);if(o&&s){if(t.length!=r.length)return!1;for(n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if(o!=s)return!1;if(t&&r&&"object"==typeof t&&"object"==typeof r){var i=Object.keys(t);if(i.length!==Object.keys(r).length)return!1;var a=t instanceof Date,c=r instanceof Date;if(a&&c)return t.getTime()==r.getTime();if(a!=c)return!1;var u=t instanceof RegExp,l=r instanceof RegExp;if(u&&l)return t.toString()==r.toString();if(u!=l)return!1;for(n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=0;n<i.length;n++)if(!e(t[i[n]],r[i[n]]))return!1;return!0}return!1}},function(e,t,r){var n,o;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(s){if(void 0===(o="function"==typeof(n=s)?n.call(t,r,t,e):n)||(e.exports=o),!0,e.exports=s(),!!0){var i=window.Cookies,a=window.Cookies=s();a.noConflict=function(){return window.Cookies=i,a}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}return function t(r){function n(t,o,s){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(s=e({path:"/"},n.defaults,s)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}s.expires=s.expires?s.expires.toUTCString():"";try{i=JSON.stringify(o),/^[\{\[]/.test(i)&&(o=i)}catch(e){}o=r.write?r.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var u in s)s[u]&&(c+="; "+u,!0!==s[u]&&(c+="="+s[u]));return document.cookie=t+"="+o+c}t||(i={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<l.length;p++){var m=l[p].split("="),h=m.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var f=m[0].replace(d,decodeURIComponent);if(h=r.read?r.read(h,f):r(h,f)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===f){i=h;break}t||(i[f]=h)}catch(e){}}return i}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,r){n(t,"",e(r,{expires:-1}))},n.withConverter=t,n}(function(){})})},function(e,t,r){var n=r(18)("wks"),o=r(10),s=r(1).Symbol,i="function"==typeof s;(e.exports=function(e){return n[e]||(n[e]=i&&s[e]||(i?s:o)("Symbol."+e))}).store=n},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(1),o=r(12),s=r(26),i=r(10)("src"),a=Function.toString,c=(""+a).split("toString");r(4).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,r,a){var u="function"==typeof r;u&&(s(r,"name")||o(r,"name",t)),e[t]!==r&&(u&&(s(r,i)||o(r,i,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||a.call(this)})},function(e,t,r){var n=r(20),o=r(25);e.exports=r(6)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";var n=r(27),o=r(14),s=r(29),i=r(2),a=[].sort,c=[1,2,3];n(n.P+n.F*(i(function(){c.sort(void 0)})||!i(function(){c.sort(null)})||!r(31)(a)),"Array",{sort:function(e){return void 0===e?a.call(s(this)):a.call(s(this),o(e))}})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){e.exports=r(32)},function(e,t,r){var n=r(17),o=r(9)("toStringTag"),s="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:s?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(4),o=r(1),s=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(19)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t,r){var n=r(21),o=r(22),s=r(24),i=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=s(t,!0),n(r),o)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(5);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(6)&&!r(2)(function(){return 7!=Object.defineProperty(r(23)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(5),o=r(1).document,s=n(o)&&n(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,r){var n=r(5);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(1),o=r(4),s=r(12),i=r(11),a=r(28),c=function(e,t,r){var u,l,d,p,m=e&c.F,h=e&c.G,f=e&c.S,g=e&c.P,b=e&c.B,_=h?n:f?n[t]||(n[t]={}):(n[t]||{}).prototype,k=h?o:o[t]||(o[t]={}),w=k.prototype||(k.prototype={});for(u in h&&(r=t),r)d=((l=!m&&_&&void 0!==_[u])?_:r)[u],p=b&&l?a(d,n):g&&"function"==typeof d?a(Function.call,d):d,_&&i(_,u,d,e&c.U),k[u]!=d&&s(k,u,p),g&&w[u]!=d&&(w[u]=d)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,r){var n=r(14);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(30);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){"use strict";r.r(t);r(0);let n,o,s,i;!function(e){e.PackShown="packShown",e.BulkEventLogged="bulkEventLogger",e.ApiResponseTtlExpired="apiResponseTtlExpired",e.ApiResponseErrorTtlExpired="apiResponseErrorTtlExpired",e.NotShownPackUpdated="notShownPackUpdated",e.LastShownPackUpdated="lastShownPackUpdated",e.UpdatePreload="updatePreload"}(n||(n={})),function(e){e.Onboarding="onboarding",e.Export="export",e.More="more",e.Bulk="bulk",e.ClientLogs="client_logs",e.Subs="subs",e.Profile="profile",e.CountryLang="language",e.Blocked="blocked",e.Preferences="preferences",e.Subscribers="subscribers",e.Category="category",e.Categories="categories",e.Suggest="suggest",e.BlockedSuggest="blocked_suggest",e.VideoRecommend="video_recommend",e.PublisherConfig="publisher_config",e.CommentsCounter="comments_counter",e.CommentsInfos="comments_infos",e.SendAppLinkSms="send_app_link_sms",e.SocialProfile="social_profile",e.SocialActivityFeed="social_activity_feed",e.SocialProfileEdit="social_profile_edit",e.SocialInterestsFeedback="social_interests_feedback",e.ProfileOnboardingShown="profile_onboarding_shown",e.ProfileCompleteOnboarding="profile_complete_onboarding",e.ProfileDeactivate="profile_deactivate",e.ProfileCancelDeactivate="profile_cancel_deactivate",e.AllChannelsLink="all_channels_link",e.CurrentUserInterests="current-user-interests",e.CurrentUserSubscriptions="current-user-subscriptions",e.Teasers="teasers"}(o||(o={})),function(e){e.SessionCache="cacheStorage",e.MultiSessionCache="multiCacheStorage"}(s||(s={})),function(e){e.Network="network",e.CacheBeforeNetwork="cache-before-network",e.CacheAfterNetwork="cache-after-network"}(i||(i={}));const a=5e3,c={zenFeatures:{},clientExperiments:null,apiResponseValidator:()=>null,links:Object.keys(o).reduce((e,t)=>(e[t]=null,e),{}),userInfo:{},cache:{type:s.SessionCache,namespace:"common",isPrefetchEnabled:!0,useLocalNamespaces:!1},chromeExtensionId:null,feedFilter:void 0},u="ZenLibLoaderError";let l,d;!function(e){e.Network="network",e.Logic="logic",e.Unknown="unknown"}(l||(l={})),function(e){e.Front="frontend",e.Backend="backend",e.Unknown="somebody"}(d||(d={}));class p extends Error{constructor({message:e,owner:t,sourceType:r,type:n}){super(e),this.owner=t,this.sourceType=r,this.name=u,this.type=n}}let m;!function(e){e.Chromium="chromium",e.Firefox="firefox",e.Edge="edge",e.Legacy="legacy",e.Node="node"}(m||(m={}));const h=["Chrome >= 55"],f=["Firefox >= 51"],g=["Edge >= 13"],b=[{target:m.Chromium,conditions:{browserBase:"Chromium",minBrowserBaseVersion:"55"}},{target:m.Chromium,conditions:{browserBase:"Chrome",minBrowserBaseVersion:"55"}},{target:m.Chromium,conditions:{browserName:"YandexBrowser",minBrowserVersion:"17.3.0.1"}},{target:m.Firefox,conditions:{browserName:"Firefox",minBrowserVersion:"51"}},{target:m.Edge,conditions:{browserName:"Edge",minBrowserVersion:"13"}},{target:m.Legacy,conditions:{browserName:"MSIE",minBrowserVersion:"11"}},{target:m.Legacy,conditions:{browserName:"Edge",minBrowserVersion:"12"}},{target:m.Legacy,conditions:{browserBase:"Chromium",minBrowserBaseVersion:"42"}},{target:m.Legacy,conditions:{browserName:"Firefox",minBrowserVersion:"45"}},{target:m.Legacy,conditions:{browserName:"Safari",minBrowserVersion:"9"}}],_=[{target:m.Chromium,conditions:{browserName:"ChromeMobile",minBrowserVersion:"55",osName:"Android",minOsVersion:"4.4"}},{target:m.Chromium,conditions:{browserName:"YandexBrowser",minBrowserVersion:"17.3.0.1",osName:"Android",minOsVersion:"4.4"}},{target:m.Legacy,conditions:{osName:"Android",minOsVersion:"4.4"}},{target:m.Legacy,conditions:{osName:"iOS",minOsVersion:"7"}}],k=[{target:m.Chromium,conditions:{browserName:"ChromeMobile",minBrowserVersion:"55",osName:"Android",minOsVersion:"4.4"}},{target:m.Chromium,conditions:{browserName:"YandexBrowser",minBrowserVersion:"17.3.0.1",osName:"Android",minOsVersion:"4.4"}},{target:m.Legacy,conditions:{osName:"Android",minOsVersion:"4.4"}},{target:m.Legacy,conditions:{osName:"iOS",minOsVersion:"7"}}],w=(m.Chromium,m.Chromium,m.Chromium,m.Legacy,{browserName:"BrowserName",minBrowserVersion:"BrowserVersion",browserBase:"BrowserBase",minBrowserBaseVersion:"BrowserBaseVersion",browserEngine:"BrowserEngine",minBrowserEngineVersion:"BrowserEngineVersion",osName:"OSFamily",minOsVersion:"OSVersion"}),y=(e,t)=>((e,t)=>{const r=[e,t].map(e=>e.split(".").map(e=>parseInt(e,10))),n=r[0],o=r[1],s=Math.min(n.length,o.length);for(let e=0;e<s;e++){const t=n[e],r=o[e];if(t!==r)return t>r?1:-1}return 0})(e,t)>=0,E={browserName:Object.is,minBrowserVersion:y,browserBase:Object.is,minBrowserBaseVersion:y,browserEngine:Object.is,minBrowserEngineVersion:y,osName:Object.is,minOsVersion:y},v=(e,t)=>{const r=t.find(({conditions:t})=>!t||Object.entries(t).every(t=>{const[r,n]=t,o=e[w[r]],s=E[r];return!!(n&&o&&s)&&s(String(o),n)}));return r?r.target:null},A=(e,t)=>!y(e,t);Object.is,Object.is,Object.is,Object.is;var S;!function(e){e[e.Desktop=0]="Desktop",e[e.Tablet=1]="Tablet",e[e.Mobile=2]="Mobile"}(S||(S={}));const C=e=>e.isTablet?S.Tablet:e.isMobile&&e.isTouch?S.Mobile:S.Desktop,I=e=>C(e)===S.Desktop,L=e=>C(e)===S.Tablet,R=e=>C(e)===S.Mobile,P=e=>I(e)?v(e,b):null,N=e=>L(e)?v(e,_):null,T=(e,t=!1)=>t||R(e)?v(e,k):null;var O=r(3);const x=({browserName:e="MSIE",OSFamily:t="Windows",OSVersion:r="6.1"})=>{const n=[...O.DEFAULT_REZEN_ZEN_FEATURES.video_providers];return"MSIE"!==e||"Windows"!==t||"6.1"!==r||(()=>{try{const e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");return Boolean(e)}catch(e){const t=navigator.mimeTypes&&navigator.mimeTypes.namedItem&&navigator.mimeTypes.namedItem("application/x-shockwave-flash");return Boolean(t&&t.enabledPlugin)}})()?{video_providers:n}:{video_providers:n.filter(e=>"yandex-web"!==e)}},B={appName:"site-desktop-lib",bundleName:"site-desktop-lib",uatraitsType:"desktop",columnCount:3},U={appName:"site-desktop-lib",bundleName:"site-desktop-lib",uatraitsType:"tablet",columnCount:2},F={appName:"site-mobile-lib",bundleName:"site-mobile-lib",uatraitsType:"mobile",columnCount:1},M={mordaDesktop:{appName:"morda-desktop",bundleName:"app",uatraitsType:"desktop",columnCount:3},mordaTablet:{appName:"morda-desktop",bundleName:"app",uatraitsType:"tablet",columnCount:3},mordaMobile:{appName:"morda-mobile",bundleName:"app",uatraitsType:"mobile",columnCount:1},defaultDesktop:{appName:"zenlib-desktop",bundleName:"app",uatraitsType:"desktop",columnCount:3},defaultTablet:{appName:"zenlib-desktop",bundleName:"app",uatraitsType:"tablet",columnCount:2},defaultMobile:{appName:"zenlib-mobile",bundleName:"app",uatraitsType:"mobile",columnCount:1},viber:{appName:"viber",bundleName:"app",uatraitsType:"mobile",columnCount:1},yabroMorda:{appName:"yabro-morda",bundleName:"app",uatraitsType:"desktop",columnCount:3},vb:{appName:"vb",bundleName:"app",uatraitsType:"desktop",columnCount:3},coccoc:{appName:"coccoc",bundleName:"app",uatraitsType:"desktop",columnCount:3},modalLib:{appName:"modal-lib-base",bundleName:"modal-lib-base",uatraitsType:"desktop",columnCount:2},litebro:{appName:"litebro",bundleName:"app",uatraitsType:"mobile",columnCount:1},activityDesktop:B,activityTablet:U,activityMobile:F,commentsDesktop:B,commentsTablet:U,commentsMobile:F},D=["clid","lang"],j=(e,t)=>{t.forEach(t=>{if(!(t in e))throw new p({message:`Option '${t}' is not found in loader params.`,owner:d.Front,sourceType:l.Logic})})},V=e=>{j(e,[])},q={yabro:V,yabroMorda:V},G=(e,t)=>{q[t]?q[t](e):(e=>{if(j(e,D),!e.uatraits&&!e.isDev&&!e.useLegacy)throw new p({message:"'uatraits' or 'isDev' or 'useLegacy' options must be passed in loader params.",owner:d.Front,sourceType:l.Logic})})(e)},H={version:"2.253.10",host:"https://zen.yandex.ru/",staticHost:"https://yastatic.net/s3/zen-lib/",initialDisplayedRowsNumber:6,exps:[],isDev:!1,isVideoDisabled:!1,theme:"white"},z=({uatraits:e,uatraitsType:t,useLegacy:r})=>{if(!e&&r)return m.Legacy;const{isValid:n,error:o}=(({BrowserName:e,BrowserBase:t,BrowserVersion:r,BrowserBaseVersion:n,OSFamily:o,OSVersion:s,isMobile:i})=>{return e&&"string"==typeof e&&r&&("string"==typeof r||"number"==typeof r)||t&&"string"==typeof t&&n&&("string"==typeof n||"number"==typeof n)||o&&"string"==typeof o&&s&&("string"==typeof s||"number"==typeof s)&&i?{isValid:!0}:{isValid:!1,error:"BrowserName/BrowserBase and BrowserVersion/BrowserBaseVersion are required and must be strings or number"}})(e);if(!n)throw new p({message:`UATraits: ${o}`,owner:d.Front,sourceType:l.Logic});let s;switch(t){case"desktop":s=P;break;case"tablet":s=N;break;case"mobile":s=T;break;default:throw new p({message:"No uatraits type",owner:d.Front,sourceType:l.Logic})}const i=s(e);if(!i)throw new p({message:"Zen Library does not support current browser",owner:d.Front,sourceType:l.Logic});return i},W=e=>{const{libType:t,uatraits:r,useLegacy:n,isDev:o}=e,i=t||(e=>e.isTablet?"defaultTablet":e.isMobile?"defaultMobile":"defaultDesktop")(r),a=M[i];if(!a)throw new p({message:"Passed libType is not exist.",owner:d.Front,sourceType:l.Logic});G(e,i);const c=Object.assign({},H,a,e),{uatraitsType:u,columnCount:m,isVideoDisabled:h,rowPlaceholders:f,cardPlaceholders:g,isAdUnderArticleEnabled:b,theme:_,feedFilter:k}=c,w=(({uatraits:e,columnCount:t,isVideoDisabled:r,rowPlaceholders:n,cardPlaceholders:o,isAdUnderArticleEnabled:s,theme:i})=>{const a=Object.assign({},O.DEFAULT_REZEN_ZEN_FEATURES,x({browserName:e&&e.BrowserName}),{column_count:t,row_placeholders:n,card_placeholders:o,ad_under_article_supported:s,color_theme:i});return r&&(a.no_videos=!0,delete a.video_providers),a})({uatraits:r,columnCount:m,isVideoDisabled:h,rowPlaceholders:f,cardPlaceholders:g,isAdUnderArticleEnabled:b,theme:_}),y=e.cache&&e.cache.api,E=y&&y.storeId,v=y&&y.userId;let A;return A=v?{type:k&&k.tags&&Array.isArray(k.tags)&&1===k.tags.length?s.SessionCache:s.MultiSessionCache,namespace:`lib-${E||"default-zen-store"}-${v||"empty"}`,isPrefetchEnabled:!0,useLocalNamespaces:"number"==typeof e.referrerClidResetTimeout}:null,Object.assign({},H,a,e,{buildName:z({uatraits:r,uatraitsType:u,useLegacy:n,isDev:o}),precacheKey:e.cache&&e.cache.precacheKey||null,precacheRid:e.cache&&e.cache.precacheRid||null,zenFeatures:w,cache:A})};let $;!function(e){e.ZEN_API_NETWORK="zen-api-network",e.ZEN_API_CACHE="zen-api-cache",e.ZEN_API_PRELOAD="zen-api-preload"}($||($={}));const Z=e=>"number"==typeof e,Q=e=>"string"==typeof e,K=e=>"function"==typeof e;var Y;!function(e){e.Invoke="INVOKE"}(Y||(Y={}));const J=new Map;let X=!1;const ee=({targetInstanceGetter:e,targetId:t,onBeforeCall:r=(()=>{})})=>{J.set(t,e),X||(chrome.runtime.onMessageExternal.addListener((t,n,o)=>{if(!t||"__zen-chrome-extension-rpc__"!==t.namespace||t.type!==Y.Invoke)return;try{return(n=>Promise.resolve().then(()=>r(e(),t.method,t.args,t.meta)).then(()=>n(...t.args)).then(e=>o({value:e})))(te(t)).catch(e=>{console.warn(e),o({error:null==e?void 0:e.toString()})}).catch((...e)=>console.warn("can't send error to ntp:",...e)),!0}catch(e){return console.warn(e),o({error:e.message})}}),X=!0)},te=e=>{const t=J.get(e.targetId);if(!t)throw new Error(`No instance for ${e.targetId}`);const r=t();if(!r)throw new Error(`No instance for ${e.targetId}`);if(e.targetId===$.ZEN_API_NETWORK&&K(r))return r;if("object"!=typeof r)throw new Error(`${e.targetId} is not object`);if(!r[e.method])throw new Error(`No method ${e.method} on ${e.targetId} instance`);return(...t)=>r[e.method](...t)};class re{constructor(){this._events={}}on(e,t){(this._events[e]||(this._events[e]=[])).push(t)}off(e,t){const r=this._events[e];if(!r)return;const n=r.indexOf(t);n>=0&&r.splice(n,1)}once(e,t){const r=()=>{this.off(e,t),this.off(e,r)};this.on(e,t),this.on(e,r)}subscribe(e,t){return this.on(e,t),()=>{this.off(e,t)}}emit(e,...t){const r=this._events[e];r&&r.slice().forEach(e=>{e.apply(void 0,t)})}}let ne,oe,se,ie;!function(e){e.ONE_COLUMN="one_column",e.TWO_COLUMNS="two_column",e.TWO_COLUMN_SMALL_CARDS="two_column_small_cards",e.THREE_COLUMNS="three_column",e.THREE_COLUMNS_FIRST_BIG="three_column_first_big",e.THREE_COLUMNS_SMALL_CARDS="three_column_small_cards",e.THREE_COLUMNS_INFINITY="three_column_infinity"}(ne||(ne={})),function(e){e.CARD_PLACEHOLDER="card-placeholder",e.FEATURING_CAROUSEL="carousel_card",e.COMMENT="comment",e.DIRECT="ad",e.DOC="card",e.FEATURING_PROMO="featuring_promo",e.GIF="gif",e.HINT_EULA="hint_eula",e.HINT_PERSONAL="hint_personal",e.ICEBOARDING_GRID="iceboarding-grid",e.NARRATIVE="story",e.PERSONAL_CAROUSEL="personal_carousel",e.CONTENT_CAROUSEL="content_personal_carousel",e.PLACEHOLDER="placeholder",e.POST="post",e.PROFILE_ACTIVITY_ONBOARDING="profile-activity-onboarding",e.SIMILAR_INTERESTS="similar_interests",e.SIMILAR="similar",e.USER_QUESTION="user-feedback-question",e.AUTH="auth",e.DELIMITER="delimiter",e.CARD_FILLER="card_filler"}(oe||(oe={})),function(e){e.SMALL="small",e.BIG="big",e.FREE="free",e.MEDIUM="medium"}(se||(se={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(ie||(ie={}));oe.SIMILAR,oe.USER_QUESTION;const ae=[oe.DOC,oe.POST,oe.DIRECT,oe.GIF,oe.NARRATIVE,oe.FEATURING_PROMO,oe.CARD_PLACEHOLDER,oe.COMMENT,oe.PROFILE_ACTIVITY_ONBOARDING,oe.CARD_FILLER],ce=(oe.HINT_EULA,oe.ICEBOARDING_GRID,oe.SIMILAR,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.BIG,se.SMALL,se.SMALL,se.BIG,se.FREE,se.FREE,se.FREE,se.FREE,se.SMALL,se.BIG,se.SMALL,se.SMALL,se.BIG,se.FREE,se.FREE,se.FREE,se.SMALL,se.FREE,se.FREE,se.FREE,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.SMALL,se.BIG,se.SMALL,se.SMALL,se.BIG,se.FREE,se.FREE,se.FREE,se.FREE,se.SMALL,se.BIG,se.SMALL,se.SMALL,se.BIG,se.FREE,se.FREE,se.FREE,se.SMALL,se.FREE,se.FREE,se.FREE,se.SMALL,se.SMALL,se.FREE,se.SMALL,se.BIG,(e,t=10)=>{if(!e||!e.items)return[];const r=[];for(let n=0;n<e.items.length&&r.length<t;n++){const t=e.items[n];t.type!==oe.DOC&&t.type!==oe.NARRATIVE||r.push(t.cardBackgroundWhiteImage)}return r}),ue=(e,t)=>{let r=null;return(...n)=>{null!==r&&clearTimeout(r),r=setTimeout(()=>{r=null,e(...n)},t)}},le=(e="item")=>`${e}_${Math.random()*Date.now()}`;function de(e){if(!e)return;return Object.keys(e).reduce((t,r)=>{const{bulk_params:n,stat_events:o,links:s}=e[r];return Object.assign({},t,{[r]:{bulkParams:n,statEvents:o,links:s}})},{})}const pe=({strongest_id:e,type:t,status:r,title:n,logo:o,logo_sizes:s,framed_logo:i,logo_background_color:a,title_background_color:c,title_color:u,feed_link:l,feed_api_link:d,subtitle:p,description:m,subscribers:h,audience:f,social_links:g,is_verified:b,is_nirvana:_,link:k,has_new_publications:w})=>({id:e,type:t,status:r,title:n,logo:o,subtitle:p,description:m,subscribers:h,audience:f,isVerified:b,isNirvana:_,framedLogo:i,logoSizes:s,logoBackgroundColor:a,titleBackgroundColor:c,titleColor:u,feedLink:l,feedApiLink:d,socialLinks:ge(g),link:k,hasNewPublications:w}),me=e=>{const t=de(e.stat_params);if(t)return Object.assign({},pe(e.source),t.placeholder)},he=e=>e.items.map(me),fe=({source:e,bulk_params:t,stat_events:r})=>Object.assign({},pe(e),{bulkParams:e.bulk_params||t,statEvents:e.stat_events||r}),ge=e=>Array.isArray(e)?e.map(({link:e,name:t,image:r,social_network:n})=>({link:e,name:t,image:r,network:n})):[],be=e=>{if(!e||!e.length)return;const[t,r,n]=e;return{url:t,width:Number(r),height:Number(n)}},_e=e=>{if(e&&e.items&&e.items[0]&&("direct"!==e.items[0].provider||!e.items[0].content))return void console.error(`Ad parsing error: ${JSON.stringify(e)}`);const t=e.items[0],{content:r}=t,n=t.stat_events,o=t.bulk_params;return{id:le(oe.DIRECT),type:oe.DIRECT,url:r.url,showUrl:r.linkHead+r.linkTail,domain:r.domain,title:r.title||"",text:r.body,age:r.age,warning:r.warning,imageData:be(r.image),statEvents:n,bulkParams:o}},ke=e=>{if(e)return"direct"===e.type?{type:"direct",domElemId:e.dom_elem_id,blockId:e.block_id,partnerStatId:e.partner_stat_id,isBig:e.is_big}:"adsense"===e.type?{type:"adsense",client:e.client,slot:e.slot,adsenseFormat:e.adsense_format,layoutKey:e.layout_key}:void 0},we=({items:e})=>{const t={id:le(oe.SIMILAR),type:oe.SIMILAR,items:{docs:[],direct:[],sources:[],rtb:[]}},{docs:r,direct:n,sources:o,rtb:s}=t.items;return e.forEach(e=>{switch(e.type){case"channel":case"interest":{const t=me({source:e,stat_params:e.stat_params});t&&o.push(t);break}case"small_card":r.push((e=>{const t={title:e.title||"",text:e.text||"",link:e.link,domainTitle:e.domain_title,image:e.images&&e.images.horizontal,bulkParams:e.bulk_params,statEvents:e.stat_events,ad:ke(e.ad),rocket:Boolean(e.zen_logo),feedLink:e.source.feed_link,commentsDocumentId:e.comments_document_id,allCommentsLink:e.all_comments_link,oneCommentLink:e.one_comment_link};return e.card_colors?t.cardColors={card:e.card_colors.card,text:e.card_colors.text}:e.main_color&&(t.mainColor=e.main_color),t})(e));break;case"ad":{const t=_e(e);t&&n.push(t);break}case"rtb":{const t=ke(e.ad);t&&s.push({type:e.type,ad:t});break}}}),t},ye=({source_id:e,image:t,background_color:r,text_color:n,name:o,name_background_color:s})=>({id:e,image:t,name:o,textColor:n,textBackgroundColor:s,imageBackgroundColor:r}),Ee=e=>Object.keys(e).reduce((t,r)=>{const{text:n,text_color:o,background_color:s}=e[r];return t[r]={text:n,textColor:o,backgroundColor:s},t},{}),ve=e=>({id:e.source.strongest_id,type:e.type,source:fe(e),description:e.description,blurredPreview:e.blurred_preview,background:e.background,mainColor:e.main_color,textColor:e.text_color,feedbackButtons:Ee(e.feedback),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}),Ae=({id:e,type:t,text:r,stats:n})=>({id:e,type:t,text:r,isChecked:!1,stats:n&&{statEvents:n.stat_events,bulkParams:n.bulk_params}}),Se=({id:e,type:t,display_type:r,text:n,answers:o})=>({id:e,type:t,display_type:r,text:n,answers:o.map(Ae)}),Ce=e=>{if(e.custom_user_feedback_data)try{return{questions:e.custom_user_feedback_data.questions.map(Se)}}catch(e){return void console.warn("Error parsing custom_user_feedback_data",e)}},Ie=({feedback_info:e})=>e?e.is_liked?"liked":e.is_disliked?"disliked":null:null,Le=e=>({id:e.id,title:e.title||"",text:e.text||"",bulkParams:e.bulk_params,statEvents:e.stat_events,source:pe(e.source),creationTime:e.creation_time,actionTime:e.action_time,requireUserData:e.require_user_data}),Re=e=>Object.assign({ad:ke(e.ad),bidFloor:e.bid_floor,domain:e.domain,domainTitle:e.domain_title,link:e.link,logo:e.logo,image:e.image,bigImage:e.big_card_image||e.image,blurredPreview:e.blurred_preview,cardColors:e.card_colors&&{card:e.card_colors.card,text:e.card_colors.text},mainColor:e.main_color,similarLink:e.similar&&e.similar.link,read:e.read,feedback:Ie(e),feedLink:e.source.feed_link,commentsDocumentId:e.comments_document_id,isLowResolutionDevice:e.is_low_resolution_device,allCommentsLink:e.all_comments_link,oneCommentLink:e.one_comment_link,badges:e.badges},Le(e)),Pe=e=>(e.image&&e.big_card_image,Object.assign({isPromoted:e.is_promoted,isPromoPublication:e.is_promo_publication,cardBackgroundImage:e.card_background_image,cardBackgroundWhiteImage:e.card_background_white_image,customUserFeedbackData:Ce(e),rocket:Boolean(e.zen_logo),pixels:e.pixels},Re(e))),Ne=({link:e,preview:t,width:r,height:n})=>{const o={link:e,preview:t};return(r||n)&&(o.hasSize=!0,o.width=r,o.height=n),o},Te=({background:e,background_color:t,text_color:r,link_color:n})=>({background:Ne(e),backgroundColor:t,textColor:r,linkColor:n}),Oe=({has_sound:e,heartbeat_pos:t,id:r,loop:n,player:o,provider:s,userAgent:i,additional_params:a,replay_count:c=2,autoplay:u})=>({hasSound:e,heartbeatTimes:t,id:r,loop:n,player:o,provider:s,userAgent:i,additionalParams:a,autoplay:u,replayCount:c}),xe=e=>{e.image&&!e.big_card_image&&console.warn("no big_card_image",e);const t=de(e.stat_params);if(t)return Object.assign({type:oe.GIF,video:Oe(e.video),stats:e.stats,channelOwnerUid:parseInt(e.channel_owner_uid,10),publisherId:e.publisher_id,publicationId:e.publication_id,commentsToken:e.comments_token,statParams:t},Re(e))},Be=e=>({id:e.source.strongest_id,type:e.type,source:pe(e.source),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}),Ue=e=>{if(!e.items||!e.items.length)return;const t=e.items.map(Be);return t.filter(e=>"subscribed"!==e.source.status).length<5?void 0:{id:e.id,type:oe.PERSONAL_CAROUSEL,size:e.size,title:e.title,subtitle:e.subtitle,background:e.background,showMoreLink:e.show_more_link,items:t,statEvents:e.stat_events,bulkParams:e.bulk_params,disableItemsClickable:Boolean(e.disable_items_clickable),hidden:!1}},Fe=({bulk_params:e,stat_events:t})=>({bulkParams:e,statEvents:t}),Me=e=>Object.assign({image:e.image,link:e.link,cardColors:{button:e.card_colors.button,buttonText:e.card_colors.button_text,card:e.card_colors.card,text:e.card_colors.text}},Le(e),{hidden:!1}),De=e=>Object.keys(e),je=(e,t)=>e.reduce((e,r)=>(e[t(r)]=r,e),{}),Ve={[oe.CARD_PLACEHOLDER]:e=>({id:e.item_id.toString(),type:oe.CARD_PLACEHOLDER,statEvents:e.stat_events,bulkParams:e.bulk_params}),[oe.COMMENT]:e=>Object.assign({type:oe.COMMENT,comment:e.comment,author:e.author},Le(e)),[oe.DIRECT]:_e,[oe.DOC]:e=>Object.assign({},Pe(e),{type:oe.DOC}),[oe.FEATURING_PROMO]:e=>({id:e.id,type:oe.FEATURING_PROMO,source:fe(e),header:e.header,description:e.description,blurredPreview:e.blurred_preview,background:e.background,mainColor:e.main_color,textColor:e.text_color,menu:e.menu,feedbackButtons:Ee(e.feedback),statEvents:e.stat_events,bulkParams:e.bulk_params}),[oe.GIF]:xe,[oe.HINT_EULA]:e=>e.hint_type&&"eula"!==e.hint_type?(e=>({id:e.id,type:oe.HINT_PERSONAL}))(e):(e=>({id:e.id,type:oe.HINT_EULA,link:e.link,bulkParams:e.bulk_params,statEvents:e.stat_events}))(e),[oe.ICEBOARDING_GRID]:e=>{const t={id:le(oe.ICEBOARDING_GRID),type:e.type,sources:e.sources.map(ye),stats:e.stats,moreButton:void 0,bulkParams:e.bulk_params,statEvents:e.stat_events};return e.more_button&&(t.moreButton={link:e.more_button.click}),t},[oe.NARRATIVE]:e=>Object.assign({},Pe(e),{type:oe.NARRATIVE,isPromoNarrative:"narrative_promo_text"===e.narrative_style}),[oe.PLACEHOLDER]:e=>({id:e.item_id.toString(),type:oe.PLACEHOLDER,statEvents:e.stat_events,bulkParams:e.bulk_params}),[oe.POST]:e=>{const t={type:oe.POST,id:e.id,style:Te(e.style),link:e.link,similarLink:e.similar_link,source:pe(e.source),pixels:e.pixels,bulkParams:e.bulk_params,statEvents:e.stat_events,ad:ke(e.ad),bidFloor:e.bid_floor,commentsDocumentId:e.comments_document_id,allCommentsLink:e.all_comments_link,oneCommentLink:e.one_comment_link,badges:e.badges,requireUserData:e.require_user_data,read:e.was_read,feedback:e.feedback_status,domainTitle:e.source.title};return e.rich_text&&(t.richText=(({json:e,length:t})=>({json:e,length:t}))(e.rich_text)),e.image&&(t.image=Ne(e.image)),t},[oe.PROFILE_ACTIVITY_ONBOARDING]:e=>({type:oe.PROFILE_ACTIVITY_ONBOARDING,mode:e.mode,id:e.id}),[oe.SIMILAR_INTERESTS]:e=>{const{id:t,type:r,title:n,items:o}=e;return{id:t,type:r,title:n,items:o.map(e=>me({source:e,stat_params:e.stat_params}))}},[oe.AUTH]:e=>({id:String(e.id),type:oe.AUTH,title:e.title,text:e.text,authLink:e.auth_link,bulkParams:e.bulk_params,statEvents:e.stat_events}),[oe.FEATURING_CAROUSEL]:e=>({id:e.id,type:oe.FEATURING_CAROUSEL,carouselType:e.carousel_type,title:e.title,subtitle:e.subtitle,menu:e.menu,items:e.items.map(ve),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}),[oe.PERSONAL_CAROUSEL]:Ue,[oe.CONTENT_CAROUSEL]:e=>({id:e.id,type:oe.CONTENT_CAROUSEL,carouselType:e.carousel_type,title:e.title,titleTemplate:e.title_template,subtitle:e.subtitle,source:e.source?Object.assign({},pe(e.source),Fe(e.source)):void 0,items:e.items.map(Me),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}),[oe.DELIMITER]:e=>({id:e.id,type:oe.DELIMITER,text:e.text}),[oe.CARD_FILLER]:e=>({id:e.id,type:oe.CARD_FILLER})},qe=e=>{const t=((e,t)=>e[t])(Ve,e.type);return t?t(e):(console.warn(`Unsupported doc type: ${e.type}`),null)};function Ge(e){const t={lastSawFeed:{zenApp:null,zenAppIos:null},serverTime:null};return e&&(e.last_saw_feed&&(t.lastSawFeed.zenApp=e.last_saw_feed.zen_app,t.lastSawFeed.zenAppIos=e.last_saw_feed.zen_app_ios),t.serverTime=e.server_time),t}let He,ze,We,$e,Ze,Qe,Ke,Ye;!function(e){e.Pending="pending",e.Error="error",e.Success="success"}(He||(He={})),function(e){e.Normal="normal",e.Header="header",e.PinnedCarousel="pinned-carousel"}(ze||(ze={})),function(e){e.Normal="normal",e.Navbar="navbar",e.AdfoxSmartBanner="adfox-smart-banner",e.BlockFeedBanner="block-feed-banner"}(We||(We={})),function(e){e.Top="top",e.Bottom="bottom"}($e||($e={})),function(e){e.Black="black",e.White="white"}(Ze||(Ze={})),function(e){e.App="app",e.More="more",e.Error="error",e.Load="load"}(Qe||(Qe={})),function(e){e.NARRATIVE="narrative",e.PROMO="promo",e.SPECIAL="special"}(Ke||(Ke={})),function(e){e.Feed="feed",e.Category="category",e.Categories="categories",e.Profile="profile",e.SwitchableSubs="switchable_subs",e.Suggest="suggest",e.Blocked="blocked",e.BlockedSuggest="blocked_suggest",e.VideoRecommend="video_recommend",e.Preferences="preferences",e.Language="language",e.SendAppLinkSms="send_app_link_sms",e.CommentsCounter="comments_counter",e.CommentsInfos="comments_infos"}(Ye||(Ye={}));let Je,Xe,et,tt,rt,nt,ot,st,it,at,ct,ut,lt,dt;!function(e){e.Blur="blur",e.Fade="fade"}(Je||(Je={})),function(e){e.Pinned="pinned",e.Feed="feed",e.PinnedLib="pinned-lib"}(Xe||(Xe={})),function(e){e.Yabro1="yabro-1",e.Generic="generic"}(et||(et={})),function(e){e.Placeholder="Placeholder",e.Zen="Zen"}(tt||(tt={})),function(e){e.light="white",e.dark="black",e.lightBg="white-background"}(rt||(rt={})),function(e){e.NAV_TOP_FIXED="top-fix",e.NAV_BOTTOM_FIXED="bottom-fix",e.NAV_TOP_FREE="top-free"}(nt||(nt={})),function(e){e.Coccoc="coccoc",e.Default="default"}(ot||(ot={})),function(e){e.A1="1a",e.A2="2a",e.B2="2b",e.OLD="old"}(st||(st={})),function(e){e.CookieChanged="COOKIE_CHANGED",e.HistoryChanged="HISTORY_CHANGED",e.isCustoPageVisibleChanged="IS_CUSTO_PAGE_VISIBLE_CHANGED"}(it||(it={})),function(e){e[e.NotPassed=0]="NotPassed",e[e.Passed=1]="Passed",e[e.Skipped=2]="Skipped"}(at||(at={})),function(e){e.Suggest="catalog_suggest",e.Carousel="catalog_carousel",e.Category="catalog_category",e.Subs="subscriptions",e.Blocked="profile_blocked",e.Onboarding="onboarding_popup",e.Similar="feed",e.Feed="feed",e.LeftColumn="left_column"}(ct||(ct={})),function(e){e.Suggest="suggest",e.Carousel="list_of_categories",e.Category="category",e.Subs="subscriptions",e.Blocked="blocked",e.Onboarding="onboarding_popup",e.Similar="similar",e.Feed="layout",e.Subscribers="user_subscribers",e.LeftColumn="left_column"}(ut||(ut={})),function(e){e.Narrative="narrative",e.Native="native",e.Main="main",e.Channel="channel",e.Interest="interest",e.Activity="activity",e.Subscriptions="subscriptions"}(lt||(lt={})),function(e){e.Feed="feed",e.Ok="ok",e.Banned="banned",e.NotFound="not_found"}(dt||(dt={}));const pt=e=>e.map(e=>fe({source:e})),mt=e=>{if(!e)return null;switch(e.status){case"complete":{const t=e.result&&e.result.items||[];return{status:"complete",result:pt(t)}}case"error":return e;default:return{status:"error"}}},ht=e=>{if(!e)return null;switch(e.status){case"complete":{const t=e.result&&e.result.items||[];return{status:"complete",result:pt(t).filter(e=>"domain"===e.type||"publisher"===e.type)}}case"error":return e;default:return{status:"error"}}},ft=(e,t)=>{const r=((e,t,r)=>{if(!e)return null;const n=e.reduce((e,n)=>{if(n){const o=qe(n);o&&e.push(Object.assign({},o,{packId:t,cacheId:r}))}return e},[]);return n.length>0?n:null})(e.items,e.rid,t),n=(e=>e?Object.assign({sources:he(e)},(de(e.stat_params)||{}).interests_onboarding):null)(e.interests_onboarding),o=(e=>e&&Ue(e)||null)(e.pinned_carousel),s=(e=>{if(!e)return{status:dt.Feed};switch(e.status){case dt.Banned:case dt.NotFound:return{status:e.status};case dt.Ok:return{status:dt.Ok,source:fe(e)};default:return console.error("Broken channel from backend"),{status:dt.Feed}}})(e.channel);return{id:e.rid,cacheId:t,receivedAt:e.received_at,ttl:1e3*e.ttl,storeTtl:1e3*e.store_ttl,source:e.sf,adFlightId:e.ad_flight_id,adArticleId:e.ad_article_id,publisherId:e.publisher_id,channel:s,items:r,onboardingInterests:n,pinnedCarousel:o,isIceStart:e.ice_start,experimentsData:e.experiments_data||null,groupIds:e.group_ids||"",clientDefinition:e.client_definition||null,user:Ge(e.user),commentsDoc:e.comments_doc?qe(e.comments_doc):null,currentUserInterests:mt(e.current_user_interests),currentUserSubscriptions:ht(e.current_user_subscriptions),screens:e.screens,banner:e.banner}},gt=(e,t="")=>Object.assign({},e,ft(e,t)),bt=({email:e,name:t,avatar:r})=>({email:e,name:t,avatar:r}),_t=({count:e,external_url:t})=>({count:e,externalUrl:t}),kt=({country:e,external_url:t})=>({country:e,externalUrl:t}),wt=({external_url:e})=>({externalUrl:e}),yt=({stat_events:e,bulk_params:t,disabled:r})=>({statEvents:e,bulkParams:t,disabled:r}),Et={"user-info":e=>({userInfo:bt(e)}),"no-user":e=>({noUser:wt(e)}),"blocked-count":e=>({blockedCount:_t(e)}),video:e=>({video:yt(e)}),autoplay:()=>({autoplay:{}}),language:e=>({language:kt(e)}),feedback:e=>({feedback:wt(e)}),eula:e=>({eula:wt(e)}),logout:e=>({logout:wt(e)})},vt=e=>{const t=e.items.reduce((e,t)=>Object.assign({},e,Et[t.type](t)),{});return t.userInfo||t.noUser||console.error("Inconsistent profile data"),t},At=({link:e,title:t,image:r,name:n,stat_events:o,bulk_params:s})=>({link:e,title:t,image:r,name:n,statEvents:o,bulkParams:s}),St=e=>({sources:he(e),category:e.category&&At(e.category)}),Ct=e=>{const t=e.items.filter(({type:e})=>"carousel"===e).map(({sources:e})=>e);let r=[];0!==t.length&&(r=(e=>e.filter(Boolean))([].concat(...t).map(me)));const n=e.items.filter(({type:e})=>"list_item"===e).map(At);return{sources:r,list:je(n,e=>e.name)}},It=({country_id:e,language_ids:t,countries:r,languages:n})=>({countryId:e,languageIds:t.reduce((e,t)=>(e[t]=!0,e),{}),countries:r.map(({code:e,langs:t,name:r})=>({code:e,langs:t,name:r})),languages:n}),Lt=({items:e=[]})=>e.reduce((e,t)=>{if(t.type===oe.GIF){const r=xe(t);r&&e.push(r)}return e},[]),Rt=e=>{const t={};return Object.keys(e).forEach(r=>{t[r]={count:e[r],id:void 0,text:void 0,authorName:void 0,authorAvatar:void 0}}),t},Pt=e=>{const t={};return Object.keys(e).forEach(r=>{const n=e[r];t[r]={count:n.count,id:n.id,text:n.text,authorName:n.authorName,authorAvatar:n.authorAvatar}}),t},Nt=e=>({status:e.status,uid:e.uid,avatarUrl:e.avatarUrl,name:e.name,about:e.about,followerCount:e.followerCount,subscriptionCount:e.subscriptionCount,backgroundColor:e.backgroundColor,textColor:e.textColor,interests:e.interests.map(pe),privacy:e.privacy?{hideInterests:e.privacy.hideInterests,hideActivity:e.privacy.hideActivity,hideSubscriptions:e.privacy.hideSubscriptions}:{hideInterests:!0,hideActivity:!0,hideSubscriptions:!0},isSleeping:e.isSleeping,onboardingRequired:e.onboardingRequired,csrfToken:e.csrfToken,passportRetPathPlaceholder:e.passportRetPathPlaceholder,passportAvatarEditLink:e.passportAvatarEditLink,passportDisplayNameEditLink:e.passportDisplayNameEditLink,source:me(e.source),isDeactivated:"deleted"===e.status,isNotExist:"not_exist"===e.status});let Tt,Ot;!function(e){e.Default="default",e.Reload="reload",e.NoCache="no-cache",e.NoStore="no-store"}(Tt||(Tt={})),function(e){e.GetBeforeNetwork="GET_BEFORE_NETWORK",e.PutAfterNetwork="PUT_AFTER_NETWORK",e.GetAfterNetwork="GET_AFTER_NETWORK"}(Ot||(Ot={}));const xt={[Tt.Default]:[Ot.GetBeforeNetwork,Ot.PutAfterNetwork,Ot.GetAfterNetwork],[Tt.Reload]:[Ot.PutAfterNetwork,Ot.GetAfterNetwork],[Tt.NoCache]:[Ot.PutAfterNetwork],[Tt.NoStore]:[]},Bt=e=>{const t=xt[e];if(!t)throw new Error(`Cache mode '${e}' is not exist.`);return e=>t.includes(e)};r(13);const Ut="undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB);let Ft=null;const Mt=(e,t)=>(Ut?(Ft||(Ft=new Promise((e,t)=>{const r=Ut.open("zen-db",1);r.onerror=(()=>{t(r.error)}),r.onupgradeneeded=(()=>{r.result.createObjectStore("zen-api-cache")}),r.onsuccess=(()=>{e(r.result),r.result.onclose=(()=>{Ft=null})})})),Ft):Promise.reject(new Error("indexedDB is not supported."))).then(r=>new Promise((n,o)=>{const s=r.transaction("zen-api-cache",e);s.oncomplete=(()=>{n()}),s.onerror=(()=>{o(s.error)}),t(s.objectStore("zen-api-cache"))})),Dt={get(e){let t;return Mt("readonly",r=>{t=r.get(e)}).then(()=>t.result)},set:(e,t)=>Mt("readwrite",r=>{r.put(t,e)}),delete:e=>Mt("readwrite",t=>{t.delete(e)}),clear:()=>Mt("readwrite",e=>{e.clear()}),keys(){const e=[];return Mt("readonly",t=>{const r=t.openKeyCursor?t.openKeyCursor():t.openCursor();r.onsuccess=(()=>{r.result&&(e.push(r.result.key),r.result.continue())})}).then(()=>e)}},jt={get:e=>Dt.get(e),put:(e,t)=>Dt.set(e,t),remove:e=>Dt.delete(e),isEnabled:()=>Boolean("undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)),keys:()=>Dt.keys().then(e=>{const t=[];return e.forEach(e=>{Q(e)&&t.push(e)}),t})};const Vt={},qt={get:e=>Promise.resolve(Vt[e]),put:(e,t)=>(Vt[e]=t,Promise.resolve()),remove:e=>(delete Vt[e],Promise.resolve()),isEnabled:()=>!0,keys:()=>Promise.resolve(Object.keys(Vt))};class Gt extends Error{constructor(e){super(`ZenApiCache: ${e}`)}}const Ht=({type:e=s.SessionCache,namespace:t="common"})=>{const r=Wt(e),n=e=>`${t}-${e}`;return{get(e){const t=n(e);return r.get(t).then(e=>{if(!zt(e))throw new Gt("Invalid record scheme.");return e})},put(e,t){const o=n(e);return r.put(o,t)},remove(e){const t=n(e);return r.remove(t)},keys:()=>r.keys(),isEnabled:()=>r.isEnabled()}},zt=e=>e&&e.type&&e.apiResponse&&e.params,Wt=e=>{if(e===s.MultiSessionCache&&jt.isEnabled())return jt;if(qt.isEnabled())return qt;throw new Gt("Failed to get storage provider")},$t=e=>e.keys().then(t=>t.length<25?[]:Zt(e,t)).then(t=>{const r=t.sort(({record:e},{record:t})=>t.apiResponse.received_at-e.apiResponse.received_at).splice(11).map(({key:t})=>e.remove(t));return Promise.all(r)}),Zt=(e,t)=>Promise.all(t.map(t=>e.get(t).then(e=>({record:e,key:t}))));const Qt=/[?&]([^&#]*)/,Kt=e=>{const t={},r=e.indexOf("?");if(-1===r)return t;let n=r;for(;;){const r=e.slice(n).match(Qt);if(!r)break;n+=r[0].length;const[o,s=""]=r[1].split("=");o&&(t[decodeURIComponent(o)]=decodeURIComponent(s))}return t},Yt=e=>{const t=De(e);return 0===t.length?"":t.reduce((t,r)=>{const n=e[r];return r&&void 0!==n?`${t}${0===t.length?"?":"&"}${encodeURIComponent(r)}=${encodeURIComponent(n)}`:t},"")},Jt=(e,t)=>{const r=Object.assign({},Kt(e),t),n=e.indexOf("?"),o=e.indexOf("#"),s=-1!==o?o:e.length,i=-1!==n?n:s;return e.slice(0,i)+Yt(r)+e.slice(s)},Xt=e=>{const{ok:t,url:r,status:n,statusText:o}=e;if(!t)throw new Error(`${r} ${n} (${o})`);return(e=>{const t=e.headers.get("Content-Type");return t&&-1!==t.indexOf("application/json;")?e.json():e.text()})(e)},er=(e,t={})=>{const{params:r,timeout:n=6e4,credentials:o="include"}=t,s=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(t,["params","timeout","credentials"]),i=r?Jt(e,r):e;return new Promise((e,t)=>{fetch(i,Object.assign({credentials:o},s)).then(Xt).then(e,t),(e=>new Promise(t=>{setTimeout(t,e)}))(n).then(()=>{t(new Error("Request timeout."))})})},tr=(e,t={})=>er(e,Object.assign({},t,{method:"GET",params:Object.assign({},t.params||{},{rnd:String(Date.now())})})),rr=(e={})=>{const t=Object.assign({Accept:"application/json;"},e.headers),{method:r="POST"}=e;let{body:n}=e;return t["Content-Type"]||(t["Content-Type"]="application/json;",n&&"string"!=typeof n&&(n=JSON.stringify(n))),Object.assign({},e,{method:r,headers:t,body:n})},nr=(e,t={})=>er(e,rr(t)),or=(e,t={})=>er(e,rr(t)),sr=({userInfo:e,zenFeatures:t,clientExperiments:r})=>{const n={};return e&&e.oauthToken&&(n.Authorization=`OAuth ${e.oauthToken}`),Object.keys(t||{}).length>0&&(n["Zen-Features"]=JSON.stringify(t)),n["Zen-Client-Experiments"]=["zen-version:2.253.10",...Array.isArray(r)&&r.length>0?r:[]].join(", "),n},ir=({clid:e,referrerClid:t,referrerPlace:r,countryCode:n})=>{const o={};return Object.assign({},o,{clid:e,country_code:n,referrer_clid:t,referrer_place:r})},ar=e=>{const t={};return e.partnerId&&(t.partner_user_id=String(e.partnerId)),e.adId&&(t.user_ad_id=String(e.adId)),t},cr=e=>{const t={};return e&&e.length&&(t.content_langs=e.join(",")),t},ur={[o.Export]:"export",[o.Teasers]:"teasers",[o.PublisherConfig]:"publisher-config",[o.CurrentUserSubscriptions]:"current-user-subscriptions"},lr={[o.CurrentUserInterests]:"api/social/current-user-interests"};class dr extends Error{}const pr=(e,t,r)=>{const n=ur[e];if(n){const e=fr(t),r=(({clid:e,referrerClid:t,referrerPlace:r,countryCode:n,contentLangs:o=[],channelName:s,channelId:i,interestName:a,feedFilterType:c,userInfo:u={}})=>Object.assign({},ir({clid:e,referrerClid:t,referrerPlace:r,countryCode:n}),ar(u),cr(o),{channel_name:s,channel_id:i,interest_name:a,feed_filter_type:c}))(e);return mr(e.host,n,r)}const o=lr[e];if(o){const e=fr(t),r=ir(e);return hr(e.host,o,r)}const s=r&&r[e];if(!s)throw new dr(`ZenApi ${e} url is not configured.`);return s},mr=(e,t,r)=>Jt(`${e}api/v3/launcher/${t}`,r),hr=(e,t,r)=>Jt(`${e}${t}`,r),fr=e=>{if(!e.clid)throw new dr("ZenApi clid is not configured.");if(!e.host)throw new dr("ZenApi host is not configured.");return{host:e.host,clid:e.clid,countryCode:e.countryCode,contentLangs:e.contentLangs,referrerClid:e.referrerClid,referrerPlace:e.referrerPlace,userInfo:e.userInfo,channelName:e.channelName,interestName:e.interestName,channelId:e.channelId,feedFilterType:e.feedFilterType}},gr=(e,t,r)=>{const n=((e,t)=>{const{method:r,params:n,mode:o,headers:s}=e,i={params:n,headers:Object.assign({},t?sr(t):{},s),mode:o,method:r};return e.body?Object.assign({},i,{body:e.body}):i})(t,r);return br(e,n)},br=(e,t)=>{const{method:r,body:n}=t,o=_r(r,n);return kr(o)(e,t)},_r=(e,t)=>e?t&&"GET"===e?"POST":e:t?"POST":"GET",kr=e=>"PUT"===e?or:"POST"===e?nr:tr;r(8);const wr=e=>{if(!e.clid)throw new Error("ZenApi clid is not configured.");const{clid:t,referrerClid:r,referrerPlace:n,countryCode:o,contentLangs:s,clientExperiments:i,zenFeatures:a,userInfo:c,feedFilter:u,isAdblockEnabled:l}=e;return{clid:t,referrerClid:r,referrerPlace:n,countryCode:o,contentLangs:s,clientExperiments:i,zenFeatures:a,feedFilter:u,isAdblockEnabled:l,userId:yr(c)}},yr=e=>{const{oauthToken:t,login:r,deviceId:n,profileId:o,yandexuid:s}=e;return t||r||(()=>{const e=`; ${document.cookie}`.match(/; yandex_login=([^;]*)/);return e&&e[1]})()||n||o||s||(()=>{const e=`; ${document.cookie}`.match(/; yandexuid=([^;]*)/);return e&&e[1]})()},Er=["zenFeatures","clientExperiments","contentLangs"],vr=e=>{return function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}((e=>Object.entries(e))(e).filter(([e])=>!Er.includes(e)).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>`${e}=${t}`).join("")).toString()};var Ar=r(7),Sr=r.n(Ar);const Cr=(e,t)=>{const r=Object.keys(e),n={};for(let o=0;o<r.length;o++){const s=r[o];t.includes(s)||(n[s]=e[s])}return n},Ir=e=>{if(!e||!e.items)throw new Gt("Invalid api response")},Lr=e=>Z(e)||Q(e),Rr=(e,t)=>{const r=Boolean(e.isAdblockEnabled)===Boolean(t.isAdblockEnabled),n=!Lr(e.clid)||e.clid===t.clid,o=!Lr(e.referrerClid)||e.referrerClid===t.referrerClid,s=!Q(e.referrerPlace)||e.referrerPlace===t.referrerPlace,i=!Q(e.countryCode)||e.countryCode===t.countryCode;return r&&n&&o&&s&&i&&Sr()(e.feedFilter,t.feedFilter)},Pr=(e,t)=>e.userId&&t.userId&&e.userId===t.userId,Nr=(e,t,r)=>Sr()(e.zenFeatures&&Cr(e.zenFeatures,r),t.zenFeatures&&Cr(t.zenFeatures,r)),Tr=(e,t,r)=>{if(!Array.isArray(e.clientExperiments))return!0;const n=((e,t)=>{const r=[];e&&Array.isArray(e.clientExperiments)&&r.push(...e.clientExperiments);const n=t.experimentsData;return n&&Object.keys(n).forEach(e=>{const t=n[e];(e=>e&&"object"==typeof e)(t)&&t.exp&&r.push(e)}),r})(t,r);return e.clientExperiments.every(e=>n.includes(e))},Or=(e,t)=>Array.isArray(e.contentLangs)===Array.isArray(t.contentLangs)&&(!Array.isArray(e.contentLangs)||e.contentLangs.every(e=>t.contentLangs&&t.contentLangs.includes(e))),xr=()=>({getNotShownPack(){throw new Gt("Unable to get not shown pack")},getLastShownPack(){throw new Gt("Unable to get not shown pack")},getNotShownOrLastShownPack(){throw new Gt("Unable to get pack")},putNotShownPack:()=>Promise.resolve(),putLastShownPack:()=>Promise.resolve(),removeNotShownPack:()=>Promise.resolve(),removeLastShownPack:()=>Promise.resolve()}),Br=({storage:e,cacheId:t,apiResponseValidator:r,validationParams:n})=>{const o=`not-shown-pack${t}`,s=`last-shown-pack${t}`,i=(e,{byStoreTtl:t,ignoredZenFeatures:o})=>{(e=>{if(!(e&&e.type&&e.apiResponse&&e.params))throw new Gt("Invalid cache record scheme")})(e);const s=gt(e.apiResponse);return((e,t)=>{const{receivedAt:r,ttl:n,storeTtl:o}=e,s=t?o:n;if(!(Z(r)&&Z(s)&&r+s>Date.now()))throw new Gt(`Invalid cache ${t?"store-ttl":"ttl"}.`)})(s,t),((e,t,r,n)=>{if(!e)throw new Gt("RequestCacheParams undefined");if(!t)throw new Gt("Cache params undefined");if(!Pr(e,t))throw new Gt("Invalid UserId");if(!Rr(e,t))throw new Gt("Invalid AppParams");if(!Nr(e,t,n))throw new Gt("Invalid ZenFeatures");if(!Tr(e,t,r))throw new Gt("Invalid ClientExperiments");if(!Or(e,t))throw new Gt("Invalid ContentLangs")})(n,e.params,s,o),Ir(s),r(s),s},a=(e,t,o)=>(Ir(o),r(o),{type:e,apiResponse:t,params:n});return{getNotShownPack:({byStoreTtl:t=!1,ignoredZenFeatures:r=[]}={})=>e.get(o).then(e=>{const n=i(e,{byStoreTtl:t,ignoredZenFeatures:r});return Object.assign({},e,{parsedApiResponse:n})}),getLastShownPack:({byStoreTtl:t=!1,ignoredZenFeatures:r=[]}={})=>e.get(s).then(e=>{const n=i(e,{byStoreTtl:t,ignoredZenFeatures:r});return Object.assign({},e,{parsedApiResponse:n})}),getNotShownOrLastShownPack(e=!0){return this.getNotShownPack({byStoreTtl:e}).catch(()=>this.getLastShownPack({byStoreTtl:e}))},putNotShownPack(t,r,n){const s=a(t,r,n);return e.put(o,s)},putLastShownPack(t,r,n){const o=a(t,r,n);return e.put(s,o)},removeNotShownPack:()=>e.remove(o),removeLastShownPack:()=>e.remove(s)}};var Ur=class{constructor(e){this.config=c,this.queue=Promise.resolve(),this.network=gr,this.cache=xr(),this.eventEmitter=new re,this.lastUsedPackId=null,this.lastUsedPackShown=!1,this.debouncedUpdateNotShownPack=ue(e=>this.updateNotShownPack(e),a),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.off=this.eventEmitter.off.bind(this.eventEmitter),this.addListener=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.off.bind(this.eventEmitter),this.configure(e)}configure(e){const t=K(e)?e(this.config):e;this.config=t,this.config.clid&&this.config.cache?this.cache=this.getCacheApi():this.cache=xr()}getCacheId(){if(!this.config.cache||!this.config.cache.useLocalNamespaces)return"";const e=wr(this.config);return`(${vr(e)})`}getCacheStorage(){if(!this.config.cache)throw new Gt("Cache options is not defined");return Ht(this.config.cache)}getCacheApi(){const e=this.getCacheStorage(),t=this.getCacheId(),r=wr(this.config);return Br({storage:e,cacheId:t,validationParams:r,apiResponseValidator:this.config.apiResponseValidator})}getApiRequestUrl(e){return pr(e,this.config,this.config.links)}getApiRequestUrlWithUid(e,t){return this.getApiRequestUrl(e).replace("__uid__",t)}async getApiResponseFromNetworkAndMaybePutItToCache(e,{cacheMode:t=Tt.Default,body:r,headers:o,method:s,mode:a,params:c}={}){const u=this.getApiRequestUrl(e),l=Bt(t),d=await this.makeApiRequestWithExtraHeaders(u,{body:r,headers:o,method:s,mode:a,params:c}),p=Object.assign({},d,{received_at:Date.now()}),m=gt(p,this.getCacheId());return this.config.apiResponseValidator(m),l(Ot.PutAfterNetwork)&&(this.cache.putNotShownPack(e,p,m).then(()=>{this.eventEmitter.emit(n.NotShownPackUpdated,e,p)}).catch(()=>{}),this.eventEmitter.emit(n.UpdatePreload,ce(m))),{apiResponse:m,source:i.Network}}async makeApiRequestWithExtraHeaders(e,t={}){return this.network(e,t,this.config)}async getExportApiResponse(e={}){const t=async()=>{if(Bt(e.cacheMode||Tt.Default)(Ot.GetAfterNetwork))try{return{apiResponse:(await this.cache.getNotShownOrLastShownPack()).parsedApiResponse,source:i.CacheAfterNetwork}}catch(e){e instanceof Gt||console.warn(`Failed to get cached pack after bad network request: '${e.message}'.`)}};try{return await this.getMoreApiResponse(o.Export,e)}catch(e){const r=await t();if(!r)throw e;return r}}async getMoreApiResponse(e,t={}){const r=Bt(t.cacheMode||Tt.Default);return await this.tryGetApiResponseBeforeNetwork(e,r)||await this.getApiResponseFromNetworkAndMaybePutItToCache(e,t)}async tryGetApiResponseBeforeNetwork(e,t){if(t(Ot.GetBeforeNetwork))try{return await this.getApiResponseFromCacheBeforeNetwork(e)}catch(e){e instanceof Gt||console.warn(`Failed to get cached pack before network request: '${e.message}'.`)}}async getApiResponseFromCacheBeforeNetwork(e){const{parsedApiResponse:t,type:r}=await this.cache.getNotShownPack();if(e===o.More&&r===o.Export)throw new Gt("Can not apply cache from export to more request.");if(this.lastUsedPackId===t.id)throw new Gt(`Pack '${t.id}' has already been used.`);return{apiResponse:t,source:i.CacheBeforeNetwork}}async hasValidNotShownPackInCache(e){try{return await this.getApiResponseFromCacheBeforeNetwork(e),!0}catch(e){return!1}}updateNotShownPack({invalidate:e=!1,requestType:t=o.More}={}){this.config.cache&&this.config.cache.isPrefetchEnabled&&this.addToQueue(async()=>{if(e||!await this.hasValidNotShownPackInCache(t))try{await this.getApiResponseFromNetworkAndMaybePutItToCache(t)}catch(e){}})}addToQueue(e){const t=this.queue=this.queue.then(()=>e(),()=>e());return t.catch(()=>{}),t}getConfig(){return this.config}getExport(e){return this.addToQueue(async()=>{const t=await this.getExportApiResponse(e);return this.updateNotShownPack(),t})}getMore(){return this.addToQueue(async()=>{const e=await this.getMoreApiResponse(o.More);return this.updateNotShownPack(),e})}getSimilar(e){return this.makeApiRequestWithExtraHeaders(e).then(we)}sendBannerStats(e){return this.makeApiRequestWithExtraHeaders(e)}sendAppLinkSms(e){const t=this.getApiRequestUrl(o.SendAppLinkSms);return this.makeApiRequestWithExtraHeaders(t,{params:{phone:e}})}async getPublisherConfig(){const e=this.getApiRequestUrl(o.PublisherConfig),t=await this.makeApiRequestWithExtraHeaders(e);return gt(t)}async getProfile(){const e=this.getApiRequestUrl(o.Profile),t=await this.makeApiRequestWithExtraHeaders(e);return vt(t)}async getSuggest(e){const t=this.getApiRequestUrl(o.Suggest),r=await this.makeApiRequestWithExtraHeaders(t,{params:{search_text:e}});return he(r)}async getBlockedSuggest(e){const t=this.getApiRequestUrl(o.BlockedSuggest),r=await this.makeApiRequestWithExtraHeaders(t,{params:{search_text:e}});return he(r)}async getCategories(){const e=this.getApiRequestUrl(o.Categories),t=await this.makeApiRequestWithExtraHeaders(e);return Ct(t)}async getCategory(e){const t=this.getApiRequestUrl(o.Category).replace("__name__",e),r=await this.makeApiRequestWithExtraHeaders(t);return St(r)}async getPreferences(e,t){const r=this.getApiRequestUrlWithUid(o.Preferences,e),n=await this.makeApiRequestWithExtraHeaders(r,t);return he(n)}async getVideoRecommend(){const e=this.getApiRequestUrl(o.VideoRecommend),t=await this.makeApiRequestWithExtraHeaders(e);return Lt(t)}async getCountryLang(){const e=this.getApiRequestUrl(o.CountryLang),t=await this.makeApiRequestWithExtraHeaders(e);return It(t)}async getCommentsCounters(e){const t=this.getApiRequestUrl(o.CommentsCounter),r=await this.network(t,{body:{documentIds:e},mode:"cors",method:"POST"});return Rt(r.counts)}async getCommentsInfos(e){const t=this.getApiRequestUrl(o.CommentsInfos),r=await this.network(t,{body:{documentIds:e},mode:"cors",method:"POST"});return Pt(r.infos)}async setCountryLang(e,t){const r=this.getApiRequestUrl(o.CountryLang);await this.makeApiRequestWithExtraHeaders(r,{body:{country_id:e,language_ids:t}}),this.invalidateCache()}async getSocialProfile(e){const t=this.getApiRequestUrlWithUid(o.SocialProfile,e),r=await this.makeApiRequestWithExtraHeaders(t);return Nt(r)}async getUserSubscribers(e){const t=this.getApiRequestUrlWithUid(o.Subscribers,e),r=await this.makeApiRequestWithExtraHeaders(t);return he(r)}async updateSocialProfile(e){const t=this.getApiRequestUrl(o.SocialProfileEdit);await this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":e.token},method:"PUT",body:e})}prefetch(){this.updateNotShownPack()}async invalidateCache(){this.config.cache&&(await this.cache.removeNotShownPack(),this.debouncedUpdateNotShownPack())}async clearCache(){this.config.cache&&(await this.cache.removeNotShownPack(),await this.cache.removeLastShownPack())}packUsed(e){this.lastUsedPackId=e,this.lastUsedPackShown=!1}packShown(e,t){const r=this.lastShownPackId===e&&this.lastShownCacheId===t;if(!this.config.cache||r)return;this.setLastShownPack(e,t);const o=async e=>{try{await Promise.all([this.cache.removeNotShownPack(),this.cache.putLastShownPack(e.type,e.apiResponse,e.parsedApiResponse)]),this.eventEmitter.emit(n.LastShownPackUpdated,e.type,e.apiResponse)}catch(e){}};this.addToQueue(async()=>{try{const t=await this.cache.getNotShownPack();t.apiResponse.rid===e&&await o(t)}catch(e){}finally{e===this.lastUsedPackId&&!this.lastUsedPackShown&&(this.lastUsedPackShown=!0,this.updateNotShownPack()),this.eventEmitter.emit(n.PackShown,e)}})}setLastShownPack(e,t){this.lastShownPackId=e,this.lastShownCacheId=t}async getNotShownPackFromCache(e){return(await this.cache.getNotShownPack(e)).parsedApiResponse}async getLastShownPackFromCache(e){return(await this.cache.getLastShownPack(e)).parsedApiResponse}setIntervalPackUpdater(e){const t=()=>this.updateNotShownPack({requestType:o.Export});setInterval(t,e),t()}getNetwork(){return this.network}getCache(){return this.cache}getActivityFeed(e){return this.addToQueue(async()=>{const t=await this.getMoreApiResponse(o.SocialActivityFeed,e);return this.updateNotShownPack(),t})}async sendInterestsFeedback(e){const t=this.getApiRequestUrl(o.SocialInterestsFeedback);return await this.makeApiRequestWithExtraHeaders(t,{method:"PUT",body:e})}async profileOnboardingShown(e){const t=this.getApiRequestUrl(o.ProfileOnboardingShown),r=await this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":e.token},body:{context:e.context},method:"POST"});if(!r||"ok"!==r.status)throw new Error("onboarding shown failed");return r}async completeProfileOnboarding(e){const t=this.getApiRequestUrl(o.ProfileCompleteOnboarding),r=await this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":e.token},body:{context:e.context,onboardingDocumentId:e.documentId},method:"PUT"});if(!r||"ok"!==r.status)throw new Error("complete onboarding failed");return r}async deactivateProfile(e,t){const r=this.getApiRequestUrl(o.ProfileDeactivate),{userInfo:n}=this.config,{deviceId:s}=n,{token:i}=t,a=await this.makeApiRequestWithExtraHeaders(r,{headers:{"x-csrf-token":i},body:{reason:e,deviceId:s,clientTs:Date.now()},method:"PUT"});if(!a||"ok"!==a.status)throw new Error("profile deactivate failed");return a}async cancelDeactivateProfile(e){const t=this.getApiRequestUrl(o.ProfileCancelDeactivate),{userInfo:r}=this.config,{deviceId:n}=r,{token:s}=e,i=await this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":s},body:{deviceId:n,clientTs:Date.now()},method:"PUT"});if(!i||"ok"!==i.status)throw new Error("cancel profile deactivate failed");return i}async clearCacheOverflow(){this.config.cache&&this.config.cache.namespace&&this.config.cache.useLocalNamespaces&&await $t(this.getCacheStorage())}getCurrentUserInterests(){return this.makeApiRequestWithExtraHeaders(this.getApiRequestUrl(o.CurrentUserInterests))}getCurrentUserSubscriptions(){return this.makeApiRequestWithExtraHeaders(this.getApiRequestUrl(o.CurrentUserSubscriptions))}};const Fr=(e,t)=>Object.keys(t).reduce((e,r)=>e.replace(r,t[r]),e),Mr=1e3,Dr=e=>`${e}_${Date.now()}`,jr=e=>({stats:e.map(({event:e,params:t,ts:r,info:n})=>Object.assign({event:e,data:t,ts:r},n?{info:n}:{})),bulk_ts:Date.now()}),Vr=()=>{let e,t,r=0,n=0,o=!1;const s=new Promise(t=>{e=t}),i=new Promise(e=>{t=e}),a=()=>{o=!0,t()},c=()=>{++n===r&&a()};return{trigger:()=>(e(),n===r&&a(),i),extend:e=>{o||(r++,s.then(e).then(c,c))}}},qr=(e=>{if("undefined"!=typeof document){const t=e?`${e}=1`:atob("Ymx0c3I9MQ==");return Boolean(document.cookie.match(new RegExp(t)))}})();class Gr extends Ur{constructor(...e){var t;return t=super(...e),this.bulkEvents=[],this.sendingTimeoutId=null,this.bulkEventBatch=null,t}async getApiResponseFromNetworkAndMaybePutItToCache(e,t={}){if(qr&&this.sendBulkEventsWithinQueue(),qr||0===this.bulkEvents.length||t.body)return Ur.prototype.getApiResponseFromNetworkAndMaybePutItToCache.call(this,e,t);const{bulkEvents:r}=this,n=jr(r),o=Object.assign({},t,{body:n});this.bulkEvents=[];try{return Ur.prototype.getApiResponseFromNetworkAndMaybePutItToCache.call(this,e,o)}catch(e){throw this.bulkEvents=this.bulkEvents.concat(r),e}}addToQueue(e,t=!0){return t&&(this.bulkEventBatch=null),super.addToQueue(e)}forceSendBulkEvents(){return this.bulkEventBatch=null,null!==this.sendingTimeoutId&&clearTimeout(this.sendingTimeoutId),this.sendBulkEvents()}async sendBulkEvents(){if(0===this.bulkEvents.length)return;const e=this.getApiRequestUrl(o.Bulk),{bulkEvents:t}=this,r=jr(t);this.bulkEvents=[];try{await this.makeApiRequestWithExtraHeaders(e,{body:r})}catch(e){throw this.bulkEvents=this.bulkEvents.concat(t),e}}planBulkEventsSending(){null===this.sendingTimeoutId&&(this.sendingTimeoutId=setTimeout(()=>{this.sendingTimeoutId=null,this.sendBulkEventsWithinQueue()},Mr))}sendBulkEventsWithinQueue(){if(!this.bulkEventBatch){const e=this.bulkEventBatch=Vr();this.addToQueue(()=>e.trigger().then(()=>{this.bulkEventBatch===e&&(this.bulkEventBatch=null)}),!1)}this.bulkEventBatch&&this.bulkEventBatch.extend(()=>this.sendBulkEvents().catch(e=>{console.warn("Error while sending bulk events",e)}))}oldLogBulkEvent(e){const{event:t,bulkParams:r,statMeta:o,info:s}=e,i={id:Dr(t),event:t,params:r,ts:Date.now(),info:s};this.bulkEvents.push(i),this.planBulkEventsSending(),this.eventEmitter.emit(n.BulkEventLogged,Object.assign({},i,{statMeta:o}))}logBulkEvents(e,{statEvents:t,bulkParams:r,bulkReplaceMap:o,eventReplaceMap:s,statMeta:i={},info:a}){const c=t[e];if(!c)return void console.warn(`Event '${e}' not found in statEvents object. Request not sent.`);const u={id:Dr(c),event:s?Fr(c,s):c,params:o?Fr(r,o):r,ts:Date.now(),info:a};this.bulkEvents.push(u),this.planBulkEventsSending(),this.eventEmitter.emit(n.BulkEventLogged,{event:c,statMeta:i})}async getPreferences(e){if(qr&&this.sendBulkEventsWithinQueue(),qr||0===this.bulkEvents.length)return Ur.prototype.getPreferences.call(this,e);const{bulkEvents:t}=this,r={body:jr(t)};this.bulkEvents=[];try{return Ur.prototype.getPreferences.call(this,e,r)}catch(e){throw this.bulkEvents=this.bulkEvents.concat(t),e}}}const Hr=e=>{const t=`Invalid response from ZenApi${e.message?`: '${e.message}'`:""}.`,r=new Error(t);throw e.errorType&&(r.type=e.errorType),e.ttl&&(r.ttl=e.ttl),r},zr=e=>{Array.isArray(e.items)&&e.items.length>0&&e.more&&e.more.link&&e.bulk&&e.bulk.link||Hr(e)},Wr=new Gr(e=>Object.assign({},e,{apiResponseValidator:zr})),$r=new re;t.default=(e=>{chrome.runtime.onMessageExternal.addListener((e,t,r)=>{e&&"zenlib-background"===e.target&&"getVersion"===e.method&&r({version:"2.253.10"})});const t=W(Object.assign({},e,{uatraits:e.uatraits||{}}));Wr.configure(e=>Object.assign({},e,{host:t.host,clid:t.clid,countryCode:t.countryCode,zenFeatures:t.zenFeatures,cache:t.cache,clientExperiments:t.exps,userInfo:Object.assign({},e.userInfo,t.userInfo)})),Wr.setIntervalPackUpdater(36e5);const r=(e,t,r,o)=>{o&&o.config&&n(o.config)},n=e=>{Wr.configure(t=>Object.assign({},t,e))};return ee({targetInstanceGetter:()=>Wr.getNetwork(),targetId:$.ZEN_API_NETWORK,onBeforeCall:r}),ee({targetInstanceGetter:()=>Wr.getCache(),targetId:$.ZEN_API_CACHE,onBeforeCall:r}),Promise.resolve({on(e,t){$r.on(e,t)},removeListener(e,t){$r.off(e,t)},trigger(e,...t){$r.emit(e,t)}})})}]).default;